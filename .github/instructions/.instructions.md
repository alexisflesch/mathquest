---
applyTo: "**"
---

# App Modernization Progress

> **ğŸ¤– AI AGENT PROMPT INSTRUCTIONS**  
> This project enforces **ZERO backward compatibility** and **ZERO legacy code patterns**.  
> Every change must align with modernization goals and preserve system-wide consistency.

---

## ğŸ”´ CRITICAL BEHAVIOR GUIDELINES

1. **ğŸªµ LOG ALL ACTIONS**  
   - Record every non-trivial codebase change in VuePress docs (technical details):  
     - New socket events  
     - New API endpoints  
     - New components  
     - New interfaces/types  

2. **ğŸ—‚ï¸ PHASE-BASED EXECUTION**  
   - Work in *narrow, well-defined phases*.  
   - Each phase must have clear exit criteria.  
   - If you cannot complete a phase cleanly, stop and rescope before continuing.  

3. **ğŸ¯ ALIGN WITH MODERNIZATION GOALS**  
   - Always check whether the task contributes directly to modernization.  
   - If not, pause and revise.  

4. **âœ… TEST AND VALIDATE EVERYTHING**  
   - For every change, provide test steps or add/extend tests.  
   - Run TypeScript checks (`npm run type-check`).  
   - Only run `npm run build` when changes are complete and validated.  

5. **ğŸ“š UPDATE VUEPRESS DOCS**  
   - Keep technical documentation synchronized with the codebase.  
   - Document new APIs, events, components, and shared types.  
   - Update type definitions, schemas, and examples whenever shared types change.  

6. **ğŸ§ª STRICT TDD WORKFLOW (Bugs & Enhancements)**  
   - **Step 1**: Write a Jest test (or extend one) that **fails** and reproduces the issue.  
   - **Step 2**: Show test code, file path, and the command to run it.  
   - **Step 3**: Stop. Do not modify app code until the failing test is confirmed.  
   - **Step 4**: Once confirmed, fix the app code.  
   - **Step 5**: Re-run the test. Confirm it now passes.  

   **Mandatory STOP Rule**:  
   - If you cannot create a failing test, **STOP IMMEDIATELY** and explain why.  
   - No code modifications are allowed in this case.  

7. **ğŸ” FINAL VALIDATION**  
   - Run TS checks and all tests.  
   - Verify expected vs actual behavior.  
   - Ensure references to removed/changed types are fully updated.  

---

## âš ï¸ ZERO TOLERANCE RULES

8. **ğŸš« NO migration layers or compatibility functions** â€” rewrite cleanly.  
9. **ğŸ”„ CONSISTENT naming** across backend, frontend, DB, and sockets.  
10. **ğŸ“¦ USE shared types (`shared/`)** for all contracts/events.  
11. **ğŸ§ª VALIDATE with Zod** â€” no unchecked data.  
12. **ğŸ“– READ BEFORE YOU WRITE** â€” check docs and code before adding new patterns.  
13. **ğŸ” FIX ROOT CAUSES** â€” no patching inconsistencies.  
14. **â™»ï¸ REMOVE redundant interfaces** â€” use canonical types only.  
15. **âŒ REMOVE legacy compatibility fields** from shared types.  
16. **ğŸ¯ USE canonical shared types directly in components** â€” no wrapping/mapping.  
17. **ğŸ§© USE existing components** from the shared library, extend if missing.  
18. **ğŸ¨ Use `globals.css`** for global colors and styles â€” no hardcoded values.  
19. **DONâ€™T GUESS â€” VERIFY**  
    - Always check canonical types, names, and schemas before coding.  
    - Never introduce guessed or ad-hoc names.  

---

## âš™ï¸ FILES & STRUCTURE

- `scripts/` â†’ automation tools (codemods, migrations, etc.)  
- `notes/` â†’ optional scratch space for investigations  

*(Global planning files like `plan.md` are no longer required â€” use AI internal todos instead.)*  

---

## ğŸ§  AI OPERATIONAL RULES

- âœ… **Manual edits are the default.**  
  - For multi-file or complex changes, perform direct edits.  
  - Scripts are optional only for trivial, mechanical codemods.  
- ğŸ” Always analyze existing patterns before introducing new code.  
- ğŸ›‘ If unsure about alignment with goals â†’ STOP, re-check context, and ask.  

---
