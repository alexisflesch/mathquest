---
applyTo: "**"
---


# App Modernization Progress

> **ğŸ¤– AI AGENT PROMPT INSTRUCTIONS:**
> This project enforces ZERO backward compatibility and ZERO legacy code patterns. When working on this codebase:

---

## ğŸ”´ CRITICAL BEHAVIOR GUIDELINES

2. **ğŸªµ LOG ALL ACTIONS**
   - Every non-trivial change must be recorded in the Vuepress documentation (dÃ©tails techniques) if it affects the codebase somehow:
     - New socket events
     - New API endpoints
     - New Components
     - New Interfaces
     - etc...

3. **ğŸ—‚ï¸ PHASE-BASED PLANNING**
   - Work must be broken down into *phases*, each with a clear scope and exit criteria.
   - Keep the scope narrow: only work on one concern/module at a time.
   - If you cannot complete a phase cleanly, update the plan and stop.

4. **ğŸ¯ ALIGN WITH THE MAIN GOAL**
   - Always check whether the current task aligns with the overall modernization objective.
   - If not, pause and revise the plan.

5. **âœ… TEST AND VALIDATE EVERYTHING**
   - After every change, provide clear steps for testing.
   - If possible, write a test case or describe how to run existing tests.
   - State expected vs. actual behavior.
   - Run TypeScript checks (`npm run type-check` or similar) as needed during development.
   - **MANDATORY**: Only run `npm run build` when all changes are complete to avoid unnecessary long build times.

6. **ğŸ“š UPDATE VUEPRESS DOCS**
   - When making changes to the codebase, always update the corresponding VuePress documentation.
   - Keep technical documentation in sync with code changes.
   - Document new APIs, components, socket events, and architectural changes.
   - **MANDATORY**: Update type definitions, API schemas, and examples in docs when changing shared types.

7. **ğŸ§ª CREATE TESTS FOR BUG FIXES (TDD WORKFLOW)**
   - **Step 1**: Write a test that reproduces the bug (test should pass, confirming the bug exists).
   - **Step 2**: Fix the code to resolve the bug.
   - **Step 3**: Re-run the test (it should now fail because the bug is gone).
   - **Step 4**: Modify the test to expect the correct behavior (test should now pass).
   - Run TypeScript checks as needed during this process.
   - Ensure the test covers the specific bug scenario and validates the fix.

8. **ğŸ§ª CREATE TESTS FOR NEW CODE**
   - Always create comprehensive tests when introducing new code.
   - Include unit tests, integration tests, and edge case coverage.
   - Test both positive and negative scenarios.

8.5 **ğŸ§ª TEST-DRIVEN APPROACH FOR BUGS**
   - When working on tests, **NEVER edit the app's code directly**.
   - If a test fails due to a bug in the app, first try to fix the test itself (if it's a test issue).
   - If the test reveals a genuine app bug, **STOP and ask for guidance** on whether/how to fix the app code.
   - Do not modify app functionality while working on tests - maintain separation of concerns.

9. **ğŸ” VALIDATE BEFORE COMPLETION**
   - Run TypeScript checks and ensure compilation is successful.
   - Run all tests and ensure they pass.
   - Verify the functionality works as expected.
   - **MANDATORY**: Only run `npm run build` when all changes are complete and validated.
   - **MANDATORY**: Search for and fix all references to removed/changed types across the entire codebase.

---

## âš ï¸ ZERO TOLERANCE POLICY

10. **ğŸš« NEVER create migration layers or compatibility functions**
    - Rewrite code natively with modern patterns.

11. **ğŸ”„ ENFORCE consistent naming**
    - Match names across backend, frontend, database, and socket layers exactly.

12. **ğŸ“¦ USE shared types in `shared/`**
    - All API contracts and socket events must use canonical shared types.

13. **ğŸ§ª VALIDATE everything with Zod**
    - No untyped or unchecked data should ever flow through the system.

14. **ğŸ“– READ BEFORE YOU WRITE**
    - Read the docs first.
    - Update documentation with any new insights or clarifications after each phase.

15. **ğŸ” FIX ROOT CAUSES**
    - Don't patch over inconsistenciesâ€”remove them at the source.

16. **â™»ï¸ REMOVE redundant interfaces**
    - Prefer canonical types like `Question`, `FilteredQuestion`, etc.
    - Never redefine shared concepts locally.

17. **âŒ REMOVE legacy compatibility fields**
    - Shared types must be clean, modern, and reflect the current system only.

18. **ğŸ¯ USE canonical shared types directly in components**
    - No mapping, re-wrapping, or interface duplication is allowed.

19. **ğŸ§© USE existing components**
    - Always use existing components from the shared library.
    - If a component is missing, create it in the shared library.
   
20. **Use globals.css**
    - All global styles and colors should be defined in `globals.css` to ensure consistency across the application.
    - No hard-coded colors

21. **DON'T GUESS â€” VERIFY EVERYTHING**
    - Never guess variable names, function names, event names, types, or data structures.
    - Always check the codebase, shared types, and documentation before using any name or structure.
    - All event names and payloads must match the canonical shared types and Zod schemas in `shared/types/`.
    - If you are unsure, STOP and ask for clarification or search the codebase.
    - Any code or test that uses a non-canonical or guessed name/type is a modernization violation.---

## âš™ï¸ REQUIRED FILES & STRUCTURE

- `plan.md` â†’ Global checklist with goals and sub-tasks
- `scripts/` â†’ Store all automation scripts here (e.g., code mod tools, migrations)
- `notes/` â†’ Optional: Temporary investigations or analysis for future actions

---

## ğŸ§  AI OPERATIONAL RULES

- â— Do NOT suggest or perform **manual edits** for multi-file changes unless I say otherwise.
  - Instead, create a reusable script or command (preferably Python).
- ğŸ” Always **analyze existing patterns** before introducing new code.
- ğŸ”„ When stuck, revise `plan.md` before proceeding.
- ğŸ›‘ If you're unsure whether a change helps the main goal, **STOP**, re-align and **ask**.

---

