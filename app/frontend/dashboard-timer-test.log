
> frontend@0.1.0 test
> jest src/app/dashboard/__tests__/DashboardTimer.integration.test.tsx

  console.log
    [17:45:23.315] [DEBUG] [SimpleTimer] [SimpleTimer] Config changed: {
      role: 'teacher',
      gameId: undefined,
      accessCode: 'TEST123',
      hasSocket: false
    }

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:23.379] [INFO] [TeacherDashboard] Setting up socket connection for game code: TEST123

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:23.381] [INFO] [TeacherDashboard] Initializing socket connection

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:23.386] [DEBUG] [SimpleTimer] [SimpleTimer] Config changed: {
      role: 'teacher',
      gameId: undefined,
      accessCode: 'TEST123',
      hasSocket: true
    }

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:23.394] [INFO] [SimpleTimer] [SimpleTimer][handleTimerUpdate] Timer update received {
      payload: {
        timer: {
          status: 'run',
          questionUid: 'q-1',
          timerEndDateMs: 1751211030000
        },
        questionUid: 'q-1'
      }
    }

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:23.395] [INFO] [SimpleTimer] [SimpleTimer][handleTimerUpdate] Current timerState before update {
      timerState: {
        timeLeftMs: 0,
        status: 'stop',
        questionUid: null,
        durationMs: 0,
        isActive: false
      }
    }

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:23.397] [INFO] [SimpleTimer] [SimpleTimer][handleTimerUpdate] Setting timerState to {
      timeLeftMs: 0,
      status: 'run',
      questionUid: 'q-1',
      durationMs: 0,
      isActive: false
    }

      at log (src/clientLogger.ts:156:21)

(node:1810563) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
  console.log
    [17:45:23.412] [INFO] [TeacherDashboard] Dashboard state received: {
      gameId: 'test-game',
      accessCode: 'TEST123',
      templateName: 'Mock Quiz',
      status: 'active',
      currentQuestionUid: 'q-1',
      questions: [
        {
          uid: 'q-1',
          text: 'Question 1',
          answerOptions: [Array],
          correctAnswers: [Array],
          questionType: 'SINGLE_CHOICE',
          discipline: 'math',
          themes: [],
          difficulty: 1,
          gradeLevel: 'elementary',
          explanation: 'Explanation 1',
          tags: [],
          isHidden: false,
          durationMs: 30000
        },
        {
          uid: 'q-2',
          text: 'Question 2',
          answerOptions: [Array],
          correctAnswers: [Array],
          questionType: 'SINGLE_CHOICE',
          discipline: 'math',
          themes: [],
          difficulty: 1,
          gradeLevel: 'elementary',
          explanation: 'Explanation 2',
          tags: [],
          isHidden: false,
          durationMs: 47000
        }
      ],
      timer: { status: 'run', timerEndDateMs: 1751211030000, questionUid: 'q-1' },
      answersLocked: false,
      participantCount: 1,
      answerStats: {}
    }

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:23.414] [INFO] [TeacherDashboard] üìç Dashboard should be listening for stats in room: dashboard_test-game

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:23.415] [INFO] [TeacherDashboard] üìç Alternative room format (if quiz mode): teacher_<userId>_TEST123

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:23.416] [INFO] [TeacherDashboard] üìç Current accessCode: TEST123

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:23.417] [INFO] [TeacherDashboard] Questions loaded: 2

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:23.419] [INFO] [TeacherDashboard] Setting current question from initial state: q-1

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:23.421] [INFO] [TeacherDashboard] ‚úÖ Loaded initial answer stats for question: q-1 {}

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:23.422] [INFO] [TeacherDashboard] üì° Received initial timer state from backend: { status: 'run', timerEndDateMs: 1751211030000, questionUid: 'q-1' }

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:23.423] [INFO] [TeacherDashboard] üì° Backend should emit dashboard_timer_updated event separately

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:23.444] [INFO] [DraggableQuestions] [DEBUG][DraggableQuestionsList] question q-1 durationMs: 30000

      at log (src/clientLogger.ts:156:21)
          at Array.forEach (<anonymous>)

  console.log
    [17:45:23.447] [INFO] [DraggableQuestions] [DEBUG][DraggableQuestionsList] question q-2 durationMs: 47000

      at log (src/clientLogger.ts:156:21)
          at Array.forEach (<anonymous>)

  console.log
    [17:45:23.448] [INFO] [DraggableQuestions] [DEBUG][DraggableQuestionsList] Rendering SortableQuestion for q-1 with durationMs: 30000, isActive: true, timeLeftMs: 30000

      at log (src/clientLogger.ts:156:21)
          at Array.map (<anonymous>)

  console.log
    [17:45:23.450] [INFO] [DraggableQuestions] [DEBUG][DraggableQuestionsList] Rendering SortableQuestion for q-2 with durationMs: 47000, isActive: false, timeLeftMs: 30000

      at log (src/clientLogger.ts:156:21)
          at Array.map (<anonymous>)

  console.debug
    [TimerField] readOnly display: 00:30 ( 30000 ms )

      at debug (src/components/TimerDisplayAndEdit.ts:201:34)

  console.debug
    [TimerField] readOnly display: 00:47 ( 47000 ms )

      at debug (src/components/TimerDisplayAndEdit.ts:201:34)

  console.debug
    [TimerField] valueMs prop: 30000

      at debug (src/components/TimerDisplayAndEdit.ts:12:17)

  console.debug
    [TimerField] valueMs prop: 47000

      at debug (src/components/TimerDisplayAndEdit.ts:12:17)

  console.log
    [17:45:23.738] [INFO] [DraggableQuestions] handlePause called - forwarding to dashboard

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:23.745] [INFO] [SimpleTimer] Pausing timer: { questionUid: 'q-1' }

      at log (src/clientLogger.ts:156:21)

  console.warn
    Stop button not present in DOM at this state.

      302 |         } else {
      303 |             // Optionally log for debug
    > 304 |             console.warn('Stop button not present in DOM at this state.');
          |                     ^
      305 |         }
      306 |
      307 |         // Simulate edit (set_duration) by triggering timer update and clicking edit button

      at Object.warn (src/app/dashboard/__tests__/DashboardTimer.integration.test.tsx:304:21)

  console.log
    [17:45:24.914] [INFO] [SimpleTimer] [SimpleTimer][handleTimerUpdate] Timer update received {
      payload: {
        timer: {
          status: 'stop',
          questionUid: 'q-1',
          timerEndDateMs: 1751211030000
        },
        questionUid: 'q-1'
      }
    }

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:24.915] [INFO] [SimpleTimer] [SimpleTimer][handleTimerUpdate] Current timerState before update {
      timerState: {
        timeLeftMs: 0,
        status: 'stop',
        questionUid: null,
        durationMs: 0,
        isActive: false
      }
    }

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:24.915] [INFO] [SimpleTimer] [SimpleTimer][handleTimerUpdate] Setting timerState to {
      timeLeftMs: 0,
      status: 'stop',
      questionUid: 'q-1',
      durationMs: 0,
      isActive: false
    }

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:24.917] [INFO] [DraggableQuestions] [DEBUG][DraggableQuestionsList] question q-1 durationMs: 30000

      at log (src/clientLogger.ts:156:21)
          at Array.forEach (<anonymous>)

  console.log
    [17:45:24.919] [INFO] [DraggableQuestions] [DEBUG][DraggableQuestionsList] question q-2 durationMs: 47000

      at log (src/clientLogger.ts:156:21)
          at Array.forEach (<anonymous>)

  console.log
    [17:45:24.920] [INFO] [DraggableQuestions] [DEBUG][DraggableQuestionsList] Rendering SortableQuestion for q-1 with durationMs: 30000, isActive: true, timeLeftMs: 30000

      at log (src/clientLogger.ts:156:21)
          at Array.map (<anonymous>)

  console.log
    [17:45:24.921] [INFO] [DraggableQuestions] [DEBUG][DraggableQuestionsList] Rendering SortableQuestion for q-2 with durationMs: 47000, isActive: false, timeLeftMs: 30000

      at log (src/clientLogger.ts:156:21)
          at Array.map (<anonymous>)

  console.debug
    [TimerField] readOnly display: 00:30 ( 30000 ms )

      at debug (src/components/TimerDisplayAndEdit.ts:201:34)

  console.log
    [17:45:24.932] [DEBUG] [SortableQuestion] [Timer Display] Question q-1 was stopped. Original durationMs 30000ms is preserved for future restoration { q_uid: 'q-1', durationMs: 30000 }

      at log (src/clientLogger.ts:156:21)

  console.log
    [DEBUG][SortableQuestion] After stop: {
      q_uid: 'q-1',
      durationMs: 30000,
      liveTimeLeft: 30000,
      liveStatus: 'stop',
      displayedTimeLeft: 30000
    }

      at log (src/components/SortableQuestion.tsx:151:21)

  console.log
    [17:45:25.954] [INFO] [TeacherDashboard] Disconnecting socket

      at log (src/clientLogger.ts:156:21)
          at Array.forEach (<anonymous>)

  console.log
    [17:45:25.963] [DEBUG] [SimpleTimer] [SimpleTimer] Config changed: {
      role: 'teacher',
      gameId: undefined,
      accessCode: 'TEST123',
      hasSocket: false
    }

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:25.969] [INFO] [TeacherDashboard] Setting up socket connection for game code: TEST123

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:25.971] [INFO] [TeacherDashboard] Initializing socket connection

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:25.974] [DEBUG] [SimpleTimer] [SimpleTimer] Config changed: {
      role: 'teacher',
      gameId: undefined,
      accessCode: 'TEST123',
      hasSocket: true
    }

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:25.978] [INFO] [SimpleTimer] [SimpleTimer][handleTimerUpdate] Timer update received {
      payload: {
        timer: {
          status: 'stop',
          questionUid: 'q-2',
          timerEndDateMs: 1751211045000
        },
        questionUid: 'q-2'
      }
    }

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:25.979] [INFO] [SimpleTimer] [SimpleTimer][handleTimerUpdate] Current timerState before update {
      timerState: {
        timeLeftMs: 0,
        status: 'stop',
        questionUid: null,
        durationMs: 0,
        isActive: false
      }
    }

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:25.980] [INFO] [SimpleTimer] [SimpleTimer][handleTimerUpdate] Setting timerState to {
      timeLeftMs: 0,
      status: 'stop',
      questionUid: 'q-2',
      durationMs: 0,
      isActive: false
    }

      at log (src/clientLogger.ts:156:21)

  console.warn
    Timer input for q-2 not present, skipping edit flow.

      520 |         } else {
      521 |             // Timer input for q-2 not present, skip edit
    > 522 |             console.warn('Timer input for q-2 not present, skipping edit flow.');
          |                     ^
      523 |         }
      524 |
      525 |         // Simulate switching to second question and editing timer

      at Object.warn (src/app/dashboard/__tests__/DashboardTimer.integration.test.tsx:522:21)

  console.log
    [17:45:25.986] [INFO] [SimpleTimer] [SimpleTimer][handleTimerUpdate] Timer update received {
      payload: {
        timer: {
          status: 'stop',
          questionUid: 'q-2',
          timerEndDateMs: 1751211045000
        },
        questionUid: 'q-2'
      }
    }

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:25.988] [INFO] [SimpleTimer] [SimpleTimer][handleTimerUpdate] Current timerState before update {
      timerState: {
        timeLeftMs: 0,
        status: 'stop',
        questionUid: null,
        durationMs: 0,
        isActive: false
      }
    }

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:25.990] [INFO] [SimpleTimer] [SimpleTimer][handleTimerUpdate] Setting timerState to {
      timeLeftMs: 0,
      status: 'stop',
      questionUid: 'q-2',
      durationMs: 0,
      isActive: false
    }

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:25.994] [INFO] [TeacherDashboard] Dashboard state received: {
      gameId: 'test-game',
      accessCode: 'TEST123',
      templateName: 'Mock Quiz',
      status: 'active',
      currentQuestionUid: 'q-1',
      questions: [
        {
          uid: 'q-1',
          text: 'Question 1',
          answerOptions: [Array],
          correctAnswers: [Array],
          questionType: 'SINGLE_CHOICE',
          discipline: 'math',
          themes: [],
          difficulty: 1,
          gradeLevel: 'elementary',
          explanation: 'Explanation 1',
          tags: [],
          isHidden: false,
          durationMs: 30000
        },
        {
          uid: 'q-2',
          text: 'Question 2',
          answerOptions: [Array],
          correctAnswers: [Array],
          questionType: 'SINGLE_CHOICE',
          discipline: 'math',
          themes: [],
          difficulty: 1,
          gradeLevel: 'elementary',
          explanation: 'Explanation 2',
          tags: [],
          isHidden: false,
          durationMs: 47000
        }
      ],
      timer: { status: 'run', timerEndDateMs: 1751211030000, questionUid: 'q-1' },
      answersLocked: false,
      participantCount: 1,
      answerStats: {}
    }

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:25.995] [INFO] [TeacherDashboard] üìç Dashboard should be listening for stats in room: dashboard_test-game

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:25.996] [INFO] [TeacherDashboard] üìç Alternative room format (if quiz mode): teacher_<userId>_TEST123

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:25.996] [INFO] [TeacherDashboard] üìç Current accessCode: TEST123

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:25.997] [INFO] [TeacherDashboard] Questions loaded: 2

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:25.998] [INFO] [TeacherDashboard] Setting current question from initial state: q-1

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:25.999] [INFO] [TeacherDashboard] ‚úÖ Loaded initial answer stats for question: q-1 {}

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:25.999] [INFO] [TeacherDashboard] üì° Received initial timer state from backend: { status: 'run', timerEndDateMs: 1751211030000, questionUid: 'q-1' }

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:26.000] [INFO] [TeacherDashboard] üì° Backend should emit dashboard_timer_updated event separately

      at log (src/clientLogger.ts:156:21)

  console.log
    [17:45:26.007] [INFO] [DraggableQuestions] [DEBUG][DraggableQuestionsList] question q-1 durationMs: 30000

      at log (src/clientLogger.ts:156:21)
          at Array.forEach (<anonymous>)

  console.log
    [17:45:26.008] [INFO] [DraggableQuestions] [DEBUG][DraggableQuestionsList] question q-2 durationMs: 47000

      at log (src/clientLogger.ts:156:21)
          at Array.forEach (<anonymous>)

  console.log
    [17:45:26.009] [INFO] [DraggableQuestions] [DEBUG][DraggableQuestionsList] Rendering SortableQuestion for q-1 with durationMs: 30000, isActive: true, timeLeftMs: 30000

      at log (src/clientLogger.ts:156:21)
          at Array.map (<anonymous>)

  console.log
    [17:45:26.011] [INFO] [DraggableQuestions] [DEBUG][DraggableQuestionsList] Rendering SortableQuestion for q-2 with durationMs: 47000, isActive: false, timeLeftMs: 30000

      at log (src/clientLogger.ts:156:21)
          at Array.map (<anonymous>)

  console.debug
    [TimerField] readOnly display: 00:30 ( 30000 ms )

      at debug (src/components/TimerDisplayAndEdit.ts:201:34)

  console.debug
    [TimerField] readOnly display: 00:47 ( 47000 ms )

      at debug (src/components/TimerDisplayAndEdit.ts:201:34)

  console.debug
    [TimerField] valueMs prop: 30000

      at debug (src/components/TimerDisplayAndEdit.ts:12:17)

  console.log
    [17:45:26.040] [DEBUG] [SortableQuestion] [Timer Display] Question q-1 was stopped. Original durationMs 30000ms is preserved for future restoration { q_uid: 'q-1', durationMs: 30000 }

      at log (src/clientLogger.ts:156:21)

  console.log
    [DEBUG][SortableQuestion] After stop: {
      q_uid: 'q-1',
      durationMs: 30000,
      liveTimeLeft: 30000,
      liveStatus: 'stop',
      displayedTimeLeft: 30000
    }

      at log (src/components/SortableQuestion.tsx:151:21)

  console.debug
    [TimerField] valueMs prop: 47000

      at debug (src/components/TimerDisplayAndEdit.ts:12:17)

  console.log
    [17:45:27.004] [INFO] [TeacherDashboard] Disconnecting socket

      at log (src/clientLogger.ts:156:21)
          at Array.forEach (<anonymous>)

FAIL src/app/dashboard/__tests__/DashboardTimer.integration.test.tsx
  Dashboard Timer Integration
    ‚úï shows correct timer for play, pause, resume, stop, and edit actions (2654 ms)
    ‚úï edits timer for second question and always uses canonical durationMs (ms) (1056 ms)

  ‚óè Dashboard Timer Integration ‚Ä∫ shows correct timer for play, pause, resume, stop, and edit actions

    Unable to find an element with the display value: 00:42.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"min-h-screen bg-background"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-background border-b border-[color:var(--border)] px-4 sm:px-6 lg:px-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"max-w-7xl mx-auto py-4 sm:py-6"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center justify-between"[39m
              [36m>[39m
                [36m<div>[39m
                  [36m<h1[39m
                    [33mclass[39m=[32m"text-2xl sm:text-3xl font-bold text-foreground"[39m
                  [36m>[39m
                    [0mActivit√© [0m
                    [36m<span[39m
                      [33mclass[39m=[32m"italic"[39m
                    [36m>[39m
                      [0mMock Quiz[0m
                    [36m</span>[39m
                  [36m</h1>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"text-blue-600 underline text-sm mt-1 inline-block"[39m
                    [33mhref[39m=[32m"/teacher/projection/TEST123"[39m
                    [33mrel[39m=[32m"noopener noreferrer"[39m
                    [33mtarget[39m=[32m"_blank"[39m
                  [36m>[39m
                    [0mAfficher la page de projection[0m
                  [36m</a>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-sm text-muted-foreground mt-1 flex items-center gap-2"[39m
                  [36m>[39m
                    [36m<svg[39m
                      [33maria-hidden[39m=[32m"true"[39m
                      [33mclass[39m=[32m"lucide lucide-users-round w-4 h-4"[39m
                      [33mfill[39m=[32m"none"[39m
                      [33mheight[39m=[32m"24"[39m
                      [33mstroke[39m=[32m"currentColor"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                      [33mviewBox[39m=[32m"0 0 24 24"[39m
                      [33mwidth[39m=[32m"24"[39m
                      [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                    [36m>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M18 21a8 8 0 0 0-16 0"[39m
                      [36m/>[39m
                      [36m<circle[39m
                        [33mcx[39m=[32m"10"[39m
                        [33mcy[39m=[32m"8"[39m
                        [33mr[39m=[32m"5"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3"[39m
                      [36m/>[39m
                    [36m</svg>[39m
                    [0m0[0m
                    [0m participant[0m
                    [0m connect√©[0m
                  [36m</p>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"hidden sm:block"[39m
                [36m>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"btn btn-secondary flex items-center gap-2 whitespace-nowrap"[39m
                  [36m>[39m
                    [0mCl√¥turer[0m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"sm:hidden mt-4"[39m
              [36m>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"btn btn-secondary w-full flex items-center justify-center gap-2"[39m
                [36m>[39m
                  [0mCl√¥turer[0m
                [36m</button>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"[39m
          [36m>[39m
            [36m<section>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-2 mb-6"[39m
              [36m>[39m
                [36m<h2[39m
                  [33mclass[39m=[32m"text-xl font-semibold"[39m
                [36m>[39m
                  [0mQuestions[0m
                [36m</h2>[39m
                [36m<button[39m
                  [33maria-pressed[39m=[32m"false"[39m
                  [33mclass[39m=[32m"btn btn-outline flex items-center gap-1 "[39m
                  [33mtitle[39m=[32m"Afficher/Masquer les statistiques globales"[39m
                [36m>[39m
                  [36m<span[39m
                    [33maria-label[39m=[32m"Bar Chart"[39m
                    [33mrole[39m=[32m"img"[39m
                  [36m>[39m
                    [0müìä[0m
                  [36m</span>[39m
                  [0m Stats[0m
                [36m</button>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"btn btn-outline flex items-center gap-1"[39m
                  [33mtitle[39m=[32m"Afficher le classement final et les bonnes r√©ponses"[39m
                [36m>[39m
                  [36m<span[39m
                    [33maria-label[39m=[32m"Trophy"[39m
                    [33mrole[39m=[32m"img"[39m
                  [36m>[39m
                    [0müèÜ[0m
                  [36m</span>[39m
                  [0m Trophy[0m
                [36m</button>[39m
              [36m</div>[39m
              [36m<ul[39m
                [33mclass[39m=[32m"draggable-questions-list"[39m
              [36m>[39m
                [36m<li[39m
                  [33maria-describedby[39m=[32m""[39m
                  [33maria-disabled[39m=[32m"false"[39m
                  [33maria-roledescription[39m=[32m"sortable"[39m
                  [33mclass[39m=[32m"flex flex-row items-start select-none transition-all duration-150 ease-in-out"[39m
                  [33mrole[39m=[32m"button"[39m
                  [33mstyle[39m=[32m"opacity: 1;"[39m
                  [33mtabindex[39m=[32m"0"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"flex-1 min-w-0"[39m
                  [36m>[39m
                    [0m [0m
                    [36m<div[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"question-display flex flex-col select-none transition-all duration-150 ease-in-out "[39m
                      [33mrole[39m=[32m"button"[39m
                      [33mstyle[39m=[32m"min-width: 0;"[39m
                      [33mtabindex[39m=[32m"0"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"card w-full flex flex-col question-dashboard"[39m
                        [33mstyle[39m=[32m"min-width: 0;"[39m
                      [36m>[39m
                        [36m<div[39m
                          [33mclass[39m=[32m"flex flex-col"[39m
                        [36m>[39m
                          [36m<div[39m
                            [33mclass[39m=[32m"flex items-center justify-between gap-3 question-header "[39m
                            [33mstyle[39m=[32m"padding-top: 0px; padding-bottom: 0px;"[39m
                          [36m>[39m...

      311 |             questionUid: 'q-1'
      312 |         });
    > 313 |         await screen.findByDisplayValue('00:42');
          |                      ^
      314 |         // Click edit button (assume label contains 'edit')
      315 |         const editBtns = await screen.findAllByRole('button', { name: /edit/i });
      316 |         // Pick the first edit button for q-1

      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33
      at Object.findByDisplayValue (src/app/dashboard/__tests__/DashboardTimer.integration.test.tsx:313:22)

  ‚óè Dashboard Timer Integration ‚Ä∫ edits timer for second question and always uses canonical durationMs (ms)

    Unable to find an element with the display value: 00:45.

    Ignored nodes: comments, script, style
    [36m<body>[39m
      [36m<div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"min-h-screen bg-background"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-background border-b border-[color:var(--border)] px-4 sm:px-6 lg:px-8"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"max-w-7xl mx-auto py-4 sm:py-6"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center justify-between"[39m
              [36m>[39m
                [36m<div>[39m
                  [36m<h1[39m
                    [33mclass[39m=[32m"text-2xl sm:text-3xl font-bold text-foreground"[39m
                  [36m>[39m
                    [0mActivit√© [0m
                    [36m<span[39m
                      [33mclass[39m=[32m"italic"[39m
                    [36m>[39m
                      [0mMock Quiz[0m
                    [36m</span>[39m
                  [36m</h1>[39m
                  [36m<a[39m
                    [33mclass[39m=[32m"text-blue-600 underline text-sm mt-1 inline-block"[39m
                    [33mhref[39m=[32m"/teacher/projection/TEST123"[39m
                    [33mrel[39m=[32m"noopener noreferrer"[39m
                    [33mtarget[39m=[32m"_blank"[39m
                  [36m>[39m
                    [0mAfficher la page de projection[0m
                  [36m</a>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-sm text-muted-foreground mt-1 flex items-center gap-2"[39m
                  [36m>[39m
                    [36m<svg[39m
                      [33maria-hidden[39m=[32m"true"[39m
                      [33mclass[39m=[32m"lucide lucide-users-round w-4 h-4"[39m
                      [33mfill[39m=[32m"none"[39m
                      [33mheight[39m=[32m"24"[39m
                      [33mstroke[39m=[32m"currentColor"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                      [33mviewBox[39m=[32m"0 0 24 24"[39m
                      [33mwidth[39m=[32m"24"[39m
                      [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
                    [36m>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M18 21a8 8 0 0 0-16 0"[39m
                      [36m/>[39m
                      [36m<circle[39m
                        [33mcx[39m=[32m"10"[39m
                        [33mcy[39m=[32m"8"[39m
                        [33mr[39m=[32m"5"[39m
                      [36m/>[39m
                      [36m<path[39m
                        [33md[39m=[32m"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3"[39m
                      [36m/>[39m
                    [36m</svg>[39m
                    [0m0[0m
                    [0m participant[0m
                    [0m connect√©[0m
                  [36m</p>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"hidden sm:block"[39m
                [36m>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"btn btn-secondary flex items-center gap-2 whitespace-nowrap"[39m
                  [36m>[39m
                    [0mCl√¥turer[0m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"sm:hidden mt-4"[39m
              [36m>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"btn btn-secondary w-full flex items-center justify-center gap-2"[39m
                [36m>[39m
                  [0mCl√¥turer[0m
                [36m</button>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"[39m
          [36m>[39m
            [36m<section>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center gap-2 mb-6"[39m
              [36m>[39m
                [36m<h2[39m
                  [33mclass[39m=[32m"text-xl font-semibold"[39m
                [36m>[39m
                  [0mQuestions[0m
                [36m</h2>[39m
                [36m<button[39m
                  [33maria-pressed[39m=[32m"false"[39m
                  [33mclass[39m=[32m"btn btn-outline flex items-center gap-1 "[39m
                  [33mtitle[39m=[32m"Afficher/Masquer les statistiques globales"[39m
                [36m>[39m
                  [36m<span[39m
                    [33maria-label[39m=[32m"Bar Chart"[39m
                    [33mrole[39m=[32m"img"[39m
                  [36m>[39m
                    [0müìä[0m
                  [36m</span>[39m
                  [0m Stats[0m
                [36m</button>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"btn btn-outline flex items-center gap-1"[39m
                  [33mtitle[39m=[32m"Afficher le classement final et les bonnes r√©ponses"[39m
                [36m>[39m
                  [36m<span[39m
                    [33maria-label[39m=[32m"Trophy"[39m
                    [33mrole[39m=[32m"img"[39m
                  [36m>[39m
                    [0müèÜ[0m
                  [36m</span>[39m
                  [0m Trophy[0m
                [36m</button>[39m
              [36m</div>[39m
              [36m<ul[39m
                [33mclass[39m=[32m"draggable-questions-list"[39m
              [36m>[39m
                [36m<li[39m
                  [33maria-describedby[39m=[32m""[39m
                  [33maria-disabled[39m=[32m"false"[39m
                  [33maria-roledescription[39m=[32m"sortable"[39m
                  [33mclass[39m=[32m"flex flex-row items-start select-none transition-all duration-150 ease-in-out"[39m
                  [33mrole[39m=[32m"button"[39m
                  [33mstyle[39m=[32m"opacity: 1;"[39m
                  [33mtabindex[39m=[32m"0"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"flex-1 min-w-0"[39m
                  [36m>[39m
                    [0m [0m
                    [36m<div[39m
                      [33maria-expanded[39m=[32m"false"[39m
                      [33mclass[39m=[32m"question-display flex flex-col select-none transition-all duration-150 ease-in-out "[39m
                      [33mrole[39m=[32m"button"[39m
                      [33mstyle[39m=[32m"min-width: 0;"[39m
                      [33mtabindex[39m=[32m"0"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"card w-full flex flex-col question-dashboard"[39m
                        [33mstyle[39m=[32m"min-width: 0;"[39m
                      [36m>[39m
                        [36m<div[39m
                          [33mclass[39m=[32m"flex flex-col"[39m
                        [36m>[39m
                          [36m<div[39m
                            [33mclass[39m=[32m"flex items-center justify-between gap-3 question-header "[39m
                            [33mstyle[39m=[32m"padding-top: 0px; padding-bottom: 0px;"[39m
                          [36m>[39m...

      530 |             questionUid: 'q-2'
      531 |         });
    > 532 |         await screen.findByDisplayValue('00:45');
          |                      ^
      533 |
      534 |         mockSocket.emit.mockClear();
      535 |         // Edit timer for q-2

      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33
      at Object.findByDisplayValue (src/app/dashboard/__tests__/DashboardTimer.integration.test.tsx:532:22)

Test Suites: 1 failed, 1 total
Tests:       2 failed, 2 total
Snapshots:   0 total
Time:        4.776 s, estimated 6 s
Ran all test suites matching /src\/app\/dashboard\/__tests__\/DashboardTimer.integration.test.tsx/i.
