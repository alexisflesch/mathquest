ğŸ” Socket Payload Validator - Project root: /home/aflesch/mathquest/app
ğŸ“‚ Loading files from: shared
ğŸ“‚ Loading files from: backend/src
ğŸ“‚ Loading files from: frontend/src
âœ… Loaded 895 TypeScript files
ğŸ“‹ Loading shared references...
âœ… Found 265 shared types
âœ… Found 6 socket event constants
âœ… Found 200 Zod schemas
ğŸ” Starting Socket Payload Validation Analysis...\n
ğŸ” Finding socket handlers...
âœ… Found 42 socket handlers
ğŸ” Finding socket emitters...
âœ… Found 104 socket emitters
ğŸ” Analyzing payload validation patterns...
ğŸ” Checking shared type usage...
ğŸ” Validating naming consistency...
ğŸ’¡ Generating recommendations...
\nğŸ“Š SOCKET PAYLOAD VALIDATION RESULTS\n
============================================================
\nğŸ“ˆ SUMMARY:
   Socket Handlers: 42
   Socket Emitters: 104
   Total Issues: 387
   Shared Types Available: 265
\nğŸ”´ ISSUES FOUND:
\n   MISSINGZODVALIDATION (38 issues):
   â€¢ frontend/src/hooks/useGameSocket.ts:280 - Missing Zod schema validation
     Event: game_joined
   â€¢ frontend/src/hooks/useGameSocket.ts:315 - Missing Zod schema validation
     Event: timer_update
   â€¢ frontend/src/hooks/usePracticeSession.ts:269 - Missing Zod schema validation
     Event: connect
   â€¢ frontend/src/hooks/usePracticeSession.ts:274 - Missing Zod schema validation
     Event: disconnect
   â€¢ frontend/src/hooks/usePracticeSession.ts:279 - Missing Zod schema validation
     Event: connect_error
   ... and 33 more
\n   HARDCODEDEVENTNAMES (146 issues):
   â€¢ frontend/src/hooks/useGameSocket.ts:280 - Hardcoded event name instead of SOCKET_EVENTS constant
     Event: game_joined
   â€¢ frontend/src/hooks/useGameSocket.ts:315 - Hardcoded event name instead of SOCKET_EVENTS constant
     Event: timer_update
   â€¢ frontend/src/hooks/usePracticeSession.ts:269 - Hardcoded event name instead of SOCKET_EVENTS constant
     Event: connect
   â€¢ frontend/src/hooks/usePracticeSession.ts:274 - Hardcoded event name instead of SOCKET_EVENTS constant
     Event: disconnect
   â€¢ frontend/src/hooks/usePracticeSession.ts:279 - Hardcoded event name instead of SOCKET_EVENTS constant
     Event: connect_error
   ... and 141 more
\n   UNSHAREDPAYLOADTYPES (104 issues):
   â€¢ frontend/src/hooks/useGameSocket.ts:263 - Emitter not using shared payload types
     Event: game_answer
   â€¢ frontend/src/hooks/useGameSocket.ts:271 - Emitter not using shared payload types
     Event: join_game
   â€¢ frontend/src/hooks/useGameSocket.ts:298 - Emitter not using shared payload types
     Event: quiz_timer_action
   â€¢ frontend/src/hooks/useStudentGameSocket.ts:413 - Emitter not using shared payload types
     Event: join_game
   â€¢ frontend/src/hooks/useStudentGameSocket.ts:425 - Emitter not using shared payload types
     Event: game_answer
   ... and 99 more
\n   MISSINGTYPEGUARDS (15 issues):
   â€¢ frontend/src/hooks/usePracticeSession.ts:269 - Missing runtime type validation
     Event: connect
   â€¢ frontend/src/hooks/usePracticeSession.ts:274 - Missing runtime type validation
     Event: disconnect
   â€¢ frontend/src/hooks/usePracticeSession.ts:279 - Missing runtime type validation
     Event: connect_error
   â€¢ frontend/src/hooks/usePracticeSession.ts:300 - Missing runtime type validation
     Event: PRACTICE_SESSION_CREATED
   â€¢ frontend/src/hooks/usePracticeSession.ts:301 - Missing runtime type validation
     Event: PRACTICE_QUESTION_READY
   ... and 10 more
\n   UNDOCUMENTEDEVENTS (42 issues):
   â€¢ frontend/src/hooks/useGameSocket.ts:280 - Socket handler not documented
     Event: game_joined
   â€¢ frontend/src/hooks/useGameSocket.ts:315 - Socket handler not documented
     Event: timer_update
   â€¢ frontend/src/hooks/usePracticeSession.ts:269 - Socket handler not documented
     Event: connect
   â€¢ frontend/src/hooks/usePracticeSession.ts:274 - Socket handler not documented
     Event: disconnect
   â€¢ frontend/src/hooks/usePracticeSession.ts:279 - Socket handler not documented
     Event: connect_error
   ... and 37 more
\n   ANYTYPEDPAYLOADS (42 issues):
   â€¢ frontend/src/hooks/useGameSocket.ts:280 - Payload typed as any
     Event: game_joined
   â€¢ frontend/src/hooks/useGameSocket.ts:315 - Payload typed as any
     Event: timer_update
   â€¢ frontend/src/hooks/usePracticeSession.ts:269 - Payload typed as any
     Event: connect
   â€¢ frontend/src/hooks/usePracticeSession.ts:274 - Payload typed as any
     Event: disconnect
   â€¢ frontend/src/hooks/usePracticeSession.ts:279 - Payload typed as any
     Event: connect_error
   ... and 37 more
\nğŸ’¡ RECOMMENDATIONS:
\n1. ğŸ”´ HIGH: Add Zod validation to 38 socket handlers
   Socket handlers should validate incoming payloads with Zod schemas
   Action: Import and use appropriate Zod schemas from @shared/types/socketEvents.zod
\n2. ğŸŸ¡ MEDIUM: Replace 146 hardcoded event names
   Use SOCKET_EVENTS constants instead of hardcoded strings
   Action: Import SOCKET_EVENTS from @shared/types/socket/events and use constants
\n3. ğŸ”´ HIGH: Convert 104 local types to shared types
   Socket payloads should use canonical shared types
   Action: Replace local interface definitions with imports from @shared/types
\n============================================================
Analysis completed at: 2025-06-20T12:28:29.395Z
\nâš ï¸  Found 387 issues that need attention.
