
> app@0.1.0 test:e2e
> playwright test tests/e2e/tournament-full-flow.spec.ts

🚀 Starting E2E test setup...
✅ Backend is ready on port 3007
✅ Frontend is ready on port 3008
✅ E2E test setup complete

Running 2 tests using 1 worker

[1A[2K[1/2] [chromium] › tests/e2e/tournament-full-flow.spec.ts:301:9 › Tournament Full Flow E2E › should complete full tournament flow with feedback and leaderboard
[1A[2K[chromium] › tests/e2e/tournament-full-flow.spec.ts:301:9 › Tournament Full Flow E2E › should complete full tournament flow with feedback and leaderboard
[2025-06-13T15:59:17.766Z] === STEP 1: USER AUTHENTICATION === 

[1A[2K[2025-06-13T15:59:17.768Z] Starting user authentication... 

[1A[2K[2025-06-13T15:59:20.599Z] User not authenticated, proceeding with login... 

[1A[2K[2025-06-13T15:59:20.659Z] Filled username: TestUser 

[1A[2K[2025-06-13T15:59:20.811Z] Selected avatar: 🐨 

[1A[2K[2025-06-13T15:59:20.936Z] Clicked login button 

[1A[2K[2025-06-13T15:59:20.980Z] User authentication successful 

[1A[2K[2025-06-13T15:59:20.981Z] === STEP 2: CREATE TOURNAMENT === 

[1A[2K[2025-06-13T15:59:20.981Z] Creating tournament via API... 

[1A[2K[2025-06-13T15:59:20.998Z] Available cookies for API request {
  "cookieNames": [],
  "authToken": "undefined...",
  "teacherToken": "undefined..."
}

[1A[2K[2025-06-13T15:59:21.229Z] Tournament created successfully {
  "gameInstance": {
    "accessCode": "3157",
    "id": "c18a05e6-ff2c-4ecd-8b72-910eb60c173d"
  }
}

[1A[2K[2025-06-13T15:59:21.230Z] === STEP 3: START TOURNAMENT AND TEST KEY ELEMENTS === 

[1A[2K[2025-06-13T15:59:21.230Z] Starting tournament... 

[1A[2K[2025-06-13T15:59:22.896Z] Lobby loaded successfully 

[1A[2K[2025-06-13T15:59:22.932Z] No start button found, checking if tournament already started 

[1A[2K[2025-06-13T15:59:32.960Z] Failed to start tournament {
  "error": "page.waitForURL: Timeout 10000ms exceeded.\n=========================== logs ===========================\nwaiting for navigation to \"**/live/3157\" until \"load\"\n============================================================"
}

[1A[2K[2025-06-13T15:59:32.961Z] ❌ Tournament flow failed {
  "error": "Failed to start tournament: page.waitForURL: Timeout 10000ms exceeded.\n=========================== logs ===========================\nwaiting for navigation to \"**/live/3157\" until \"load\"\n============================================================"
}

[1A[2K[2025-06-13T15:59:33.093Z] Page content at error: "<!DOCTYPE html><html lang=\"fr\" class=\"__className_e8ce0c\" data-theme=\"light\"><head><meta charset=\"utf-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"><link rel=\"stylesheet\" href=\"/_next/static/css/app/layout.css?v=1749830361338\" data-precedence=\"next_static/css/app/layout.css\"><link rel=\"preload\" as=\"script\" fetchpriority=\"low\" href=\"/_next/static/chunks/webpack.js?v=1749830361338\"><script src=\"/_next/static/chunks/main-app.js?v=1749830361338\" async=\"\"></script><script src"

[1A[2K  1) [chromium] › tests/e2e/tournament-full-flow.spec.ts:301:9 › Tournament Full Flow E2E › should complete full tournament flow with feedback and leaderboard 

    Error: Failed to start tournament: page.waitForURL: Timeout 10000ms exceeded.
    =========================== logs ===========================
    waiting for navigation to "**/live/3157" until "load"
    ============================================================

      199 |     } catch (error: any) {
      200 |         log('Failed to start tournament', { error: error.message });
    > 201 |         throw new Error(`Failed to start tournament: ${error.message}`);
          |               ^
      202 |     }
      203 | }
      204 |
        at startTournament (/home/aflesch/mathquest/app/tests/e2e/tournament-full-flow.spec.ts:201:15)
        at /home/aflesch/mathquest/app/tests/e2e/tournament-full-flow.spec.ts:315:13

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results/tournament-full-flow-Tourn-c3618-th-feedback-and-leaderboard-chromium/test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results/tournament-full-flow-Tourn-c3618-th-feedback-and-leaderboard-chromium/video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results/tournament-full-flow-Tourn-c3618-th-feedback-and-leaderboard-chromium/error-context.md


[1A[2K[2/2] [chromium] › tests/e2e/tournament-full-flow.spec.ts:336:9 › Tournament Full Flow E2E › should handle tournament with specific debugging
[1A[2K[chromium] › tests/e2e/tournament-full-flow.spec.ts:336:9 › Tournament Full Flow E2E › should handle tournament with specific debugging
[2025-06-13T15:59:34.864Z] === ENHANCED DEBUGGING TOURNAMENT FLOW === 

[1A[2K[2025-06-13T15:59:34.867Z] Starting user authentication... 

[1A[2K[2025-06-13T15:59:35.605Z] Browser Console [info]: "%cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold"

[1A[2K[2025-06-13T15:59:35.856Z] Browser Console [log]: "%c[17:59:35.850]%c [INFO] %c[Auth]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Refreshing authentication state {force: true, shouldShowLoading: true}"

[1A[2K[2025-06-13T15:59:35.858Z] Browser Console [log]: "%c[17:59:35.852]%c [DEBUG] %c[Auth]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Current localStorage at refresh: {}"

[1A[2K[2025-06-13T15:59:35.863Z] Browser Console [log]: "%c[17:59:35.854]%c [DEBUG] %c[Auth]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Current cookies at refresh: "

[1A[2K[2025-06-13T15:59:35.870Z] Browser Console [log]: "[AuthProvider] localStorage: {}"

[1A[2K[2025-06-13T15:59:35.871Z] Browser Console [log]: "[AuthProvider] document.cookie: "

[1A[2K[2025-06-13T15:59:35.872Z] Browser Console [log]: "%c[17:59:35.858]%c [DEBUG] %c[Auth]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Auth State Updated {userState: anonymous, isAuthenticated: false, isStudent: false, isTeacher: false, isLoading: true}"

[1A[2K[2025-06-13T15:59:35.873Z] Browser Console [log]: "%c[17:59:35.860]%c [DEBUG] %c[Auth]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Auth State Snapshot: {userState: anonymous, isAuthenticated: false, isStudent: false, isTeacher: false, userProfile: Object}"

[1A[2K[2025-06-13T15:59:35.882Z] Browser Console [log]: "%c[17:59:35.861]%c [DEBUG] %c[App]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Layout mounted - Debug level message"

[1A[2K[2025-06-13T15:59:35.883Z] Browser Console [log]: "%c[17:59:35.863]%c [INFO] %c[App]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Application initialized"

[1A[2K[2025-06-13T15:59:35.883Z] Browser Console [log]: "%c[17:59:35.865]%c [WARN] %c[App]%c color: gray; color: #ffcc00; font-weight: bold; color: #9370DB; font-weight: bold;  This is an example warning"

[1A[2K[2025-06-13T15:59:35.884Z] Browser Console [log]: "%c[17:59:35.867]%c [INFO] %c[App]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Current log level: DEBUG"

[1A[2K[2025-06-13T15:59:35.953Z] Network Response: 200 http://localhost:3008/api/auth/status 

[1A[2K[2025-06-13T15:59:36.000Z] Browser Console [log]: "%c[17:59:35.995]%c [DEBUG] %c[Auth]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Auth status response validated successfully {data: Object}"

[1A[2K[2025-06-13T15:59:36.004Z] Browser Console [log]: "%c[17:59:35.996]%c [DEBUG] %c[Auth]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Auth status response processed {data: Object, detectedState: anonymous, teacherLoggedIn: false, studentLoggedIn: false, fetchedTeacherId: undefined}"

[1A[2K[2025-06-13T15:59:36.005Z] Browser Console [log]: "%c[17:59:35.997]%c [INFO] %c[Auth]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Refreshed Auth State {userState: anonymous, studentLoggedIn: false, teacherLoggedIn: false, isAuthenticated: false, profile: Object}"

[1A[2K[2025-06-13T15:59:36.112Z] Browser Console [log]: "Login page - Current userState: anonymous"

[1A[2K[2025-06-13T15:59:36.115Z] Browser Console [log]: "%c[17:59:36.110]%c [DEBUG] %c[Auth]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Auth State Updated {userState: anonymous, isAuthenticated: false, isStudent: false, isTeacher: false, isLoading: false}"

[1A[2K[2025-06-13T15:59:36.117Z] Browser Console [log]: "%c[17:59:36.110]%c [DEBUG] %c[Auth]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Auth State Snapshot: {userState: anonymous, isAuthenticated: false, isStudent: false, isTeacher: false, userProfile: Object}"

[1A[2K[2025-06-13T15:59:36.121Z] Browser Console [log]: "Login page - Current userState: anonymous"

[1A[2K[2025-06-13T15:59:36.262Z] Browser Console [warning]: "No version information available for component [tex]/ams"

[1A[2K[2025-06-13T15:59:37.727Z] User not authenticated, proceeding with login... 

[1A[2K[2025-06-13T15:59:37.806Z] Filled username: TestUser 

[1A[2K[2025-06-13T15:59:37.960Z] Selected avatar: 🐨 

[1A[2K[2025-06-13T15:59:38.106Z] Clicked login button 

[1A[2K[2025-06-13T15:59:38.147Z] Network Response: 200 http://localhost:3008/api/auth/register 

[1A[2K[2025-06-13T15:59:38.165Z] User authentication successful 

[1A[2K[2025-06-13T15:59:38.166Z] Creating tournament via API... 

[1A[2K[2025-06-13T15:59:38.181Z] Browser Console [log]: "%c[17:59:38.146]%c [INFO] %c[Auth]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Guest user registered in database {username: TestUser, avatar: 🐨, cookieId: guest_7hmf8l2e1_1749830378044}"

[1A[2K[2025-06-13T15:59:38.181Z] Browser Console [log]: "%c[17:59:38.147]%c [INFO] %c[Auth]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Guest profile set {username: TestUser, avatar: 🐨, cookieId: guest_7hmf8l2e1_1749830378044}"

[1A[2K[2025-06-13T15:59:38.183Z] Available cookies for API request {
  "cookieNames": [
    "authToken"
  ],
  "authToken": "eyJhbGciOiJIUzI1NiIs...",
  "teacherToken": "undefined..."
}

[1A[2K[2025-06-13T15:59:38.263Z] Browser Console [log]: "Login page - Current userState: guest"

[1A[2K[2025-06-13T15:59:38.265Z] Browser Console [log]: "Login page - Redirecting authenticated user to home"

[1A[2K[2025-06-13T15:59:38.279Z] Browser Console [log]: "%c[17:59:38.269]%c [DEBUG] %c[Auth]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Auth State Updated {userState: guest, isAuthenticated: false, isStudent: false, isTeacher: false, isLoading: false}"

[1A[2K[2025-06-13T15:59:38.280Z] Browser Console [log]: "%c[17:59:38.275]%c [DEBUG] %c[Auth]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Auth State Snapshot: {userState: guest, isAuthenticated: false, isStudent: false, isTeacher: false, userProfile: Object}"

[1A[2K[2025-06-13T15:59:38.464Z] Tournament created successfully {
  "gameInstance": {
    "accessCode": "3158",
    "id": "aa16d61d-5996-4f24-a60c-54e626c6f73a"
  }
}

[1A[2K[2025-06-13T15:59:38.465Z] Starting tournament... 

[1A[2K[2025-06-13T15:59:39.449Z] Browser Console [info]: "%cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold"

[1A[2K[2025-06-13T15:59:39.707Z] Browser Console [warning]: "No version information available for component [tex]/ams"

[1A[2K[2025-06-13T15:59:39.776Z] Browser Console [log]: "%c[17:59:39.771]%c [INFO] %c[Auth]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Refreshing authentication state {force: true, shouldShowLoading: true}"

[1A[2K[2025-06-13T15:59:39.777Z] Browser Console [log]: "%c[17:59:39.773]%c [DEBUG] %c[Auth]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Current localStorage at refresh: {theme: system, mathquest_avatar: 🐨, mathquest_cookie_id: guest_7hmf8l2e1_1749830378044, mathquest_username: TestUser}"

[1A[2K[2025-06-13T15:59:39.780Z] Browser Console [log]: "%c[17:59:39.775]%c [DEBUG] %c[Auth]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Current cookies at refresh: "

[1A[2K[2025-06-13T15:59:39.788Z] Browser Console [log]: "[AuthProvider] localStorage: {theme: system, mathquest_avatar: 🐨, mathquest_cookie_id: guest_7hmf8l2e1_1749830378044, mathquest_username: TestUser}"

[1A[2K[2025-06-13T15:59:39.789Z] Browser Console [log]: "[AuthProvider] document.cookie: "

[1A[2K[2025-06-13T15:59:39.790Z] Browser Console [log]: "%c[17:59:39.779]%c [DEBUG] %c[Auth]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Auth State Updated {userState: anonymous, isAuthenticated: false, isStudent: false, isTeacher: false, isLoading: true}"

[1A[2K[2025-06-13T15:59:39.791Z] Browser Console [log]: "%c[17:59:39.780]%c [DEBUG] %c[Auth]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Auth State Snapshot: {userState: anonymous, isAuthenticated: false, isStudent: false, isTeacher: false, userProfile: Object}"

[1A[2K[2025-06-13T15:59:39.795Z] Browser Console [log]: "%c[17:59:39.782]%c [DEBUG] %c[App]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Layout mounted - Debug level message"

[1A[2K[2025-06-13T15:59:39.796Z] Browser Console [log]: "%c[17:59:39.783]%c [INFO] %c[App]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Application initialized"

[1A[2K[2025-06-13T15:59:39.796Z] Browser Console [log]: "%c[17:59:39.783]%c [WARN] %c[App]%c color: gray; color: #ffcc00; font-weight: bold; color: #9370DB; font-weight: bold;  This is an example warning"

[1A[2K[2025-06-13T15:59:39.797Z] Browser Console [log]: "%c[17:59:39.784]%c [INFO] %c[App]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Current log level: DEBUG"

[1A[2K[2025-06-13T15:59:39.876Z] Network Response: 200 http://localhost:3008/api/auth/status 

[1A[2K[2025-06-13T15:59:39.922Z] Browser Console [log]: "%c[17:59:39.919]%c [WARN] %c[Auth]%c color: gray; color: #ffcc00; font-weight: bold; color: #9370DB; font-weight: bold;  Auth status response validation failed, using fallback {error: ZodError: [\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"string\",\n    \"received\": \"null\",\n    \"…, receivedData: Object}"

[1A[2K[2025-06-13T15:59:39.923Z] Browser Console [log]: "%c[17:59:39.920]%c [DEBUG] %c[Auth]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Auth status response processed {data: Object, detectedState: student, teacherLoggedIn: false, studentLoggedIn: true, fetchedTeacherId: undefined}"

[1A[2K[2025-06-13T15:59:39.924Z] Browser Console [log]: "%c[17:59:39.921]%c [INFO] %c[Auth]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Refreshed Auth State {userState: student, studentLoggedIn: true, teacherLoggedIn: false, isAuthenticated: true, profile: Object}"

[1A[2K[2025-06-13T15:59:39.998Z] Browser Console [log]: "%c[17:59:39.992]%c [INFO] %c[LobbyPage]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  User authentication verified for lobby {userState: student, userProfile: Object}"

[1A[2K[2025-06-13T15:59:40.002Z] Browser Console [log]: "%c[17:59:39.997]%c [INFO] %c[LobbyPage]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Creating socket connection with auth: {config: Object, hasAuth: false, authKeys: Array(0), authData: null}"

[1A[2K[2025-06-13T15:59:40.011Z] Browser Console [log]: "%c[17:59:40.005]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Identity check {userState: student, userProfile: Object}"

[1A[2K[2025-06-13T15:59:40.014Z] Browser Console [log]: "%c[17:59:40.006]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  User identity from AuthProvider {username: TestUser, avatar: 🐨, userId: fec2a112-9318-41c0-9c46-8bd877655068}"

[1A[2K[2025-06-13T15:59:40.017Z] Browser Console [log]: "%c[17:59:40.008]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  userId before join_lobby {userId: fec2a112-9318-41c0-9c46-8bd877655068, userProfile: Object}"

[1A[2K[2025-06-13T15:59:40.036Z] Browser Console [log]: "%c[17:59:40.011]%c [INFO] %c[LobbyPage]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Joined lobby {code: 3158}"

[1A[2K[2025-06-13T15:59:40.057Z] Browser Console [log]: "%c[17:59:40.017]%c [DEBUG] %c[Auth]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Auth State Updated {userState: student, isAuthenticated: true, isStudent: true, isTeacher: false, isLoading: false}"

[1A[2K[2025-06-13T15:59:40.061Z] Browser Console [log]: "%c[17:59:40.019]%c [DEBUG] %c[Auth]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Auth State Snapshot: {userState: student, isAuthenticated: true, isStudent: true, isTeacher: false, userProfile: Object}"

[1A[2K[2025-06-13T15:59:40.065Z] Browser Console [log]: "%c[17:59:40.022]%c [INFO] %c[LobbyPage]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  User authentication verified for lobby {userState: student, userProfile: Object}"

[1A[2K[2025-06-13T15:59:40.069Z] Browser Console [log]: "%c[17:59:40.027]%c [INFO] %c[LobbyPage]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Creating socket connection with auth: {config: Object, hasAuth: false, authKeys: Array(0), authData: null}"

[1A[2K[2025-06-13T15:59:40.082Z] Browser Console [log]: "%c[17:59:40.034]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Identity check {userState: student, userProfile: Object}"

[1A[2K[2025-06-13T15:59:40.084Z] Browser Console [log]: "%c[17:59:40.036]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  User identity from AuthProvider {username: TestUser, avatar: 🐨, userId: fec2a112-9318-41c0-9c46-8bd877655068}"

[1A[2K[2025-06-13T15:59:40.085Z] Browser Console [log]: "%c[17:59:40.039]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  userId before join_lobby {userId: fec2a112-9318-41c0-9c46-8bd877655068, userProfile: Object}"

[1A[2K[2025-06-13T15:59:40.086Z] Browser Console [log]: "%c[17:59:40.041]%c [INFO] %c[LobbyPage]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Joined lobby {code: 3158}"

[1A[2K[2025-06-13T15:59:40.099Z] Network Response: 200 http://localhost:3007/api/v1/games/3158/state 

[1A[2K[2025-06-13T15:59:40.100Z] Network Response: 200 http://localhost:3007/api/v1/games/3158/state 

[1A[2K[2025-06-13T15:59:40.137Z] Network Response: 200 http://localhost:3007/api/v1/games/3158/state 

[1A[2K[2025-06-13T15:59:40.142Z] Network Response: 200 http://localhost:3007/api/v1/games/3158/state 

[1A[2K[2025-06-13T15:59:40.163Z] Browser Console [log]: "%c[17:59:40.152]%c [INFO] %c[LobbyPage]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Socket connected successfully! Socket ID: RO4MU0i_BmB_ZHLHAABE"

[1A[2K[2025-06-13T15:59:40.167Z] Browser Console [log]: "%c[17:59:40.157]%c [INFO] %c[LobbyPage]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Socket connected successfully! Socket ID: kVYiOw0UkkMGc8afAABF"

[1A[2K[2025-06-13T15:59:40.172Z] Browser Console [log]: "%c[17:59:40.159]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Socket event: connection_established [Object]"

[1A[2K[2025-06-13T15:59:40.174Z] Browser Console [log]: "[Lobby] Socket event received: connection_established [Object]"

[1A[2K[2025-06-13T15:59:40.184Z] Lobby loaded successfully 

[1A[2K[2025-06-13T15:59:40.200Z] Browser Console [log]: "%c[17:59:40.174]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Socket event: room_joined [Object]"

[1A[2K[2025-06-13T15:59:40.201Z] Browser Console [log]: "[Lobby] Socket event received: room_joined [Object]"

[1A[2K[2025-06-13T15:59:40.202Z] Network Response: 200 http://localhost:3007/api/v1/games/3158 

[1A[2K[2025-06-13T15:59:40.205Z] Browser Console [log]: "%c[17:59:40.184]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Socket event: room_joined [Object]"

[1A[2K[2025-06-13T15:59:40.217Z] Browser Console [log]: "[Lobby] Socket event received: room_joined [Object]"

[1A[2K[2025-06-13T15:59:40.218Z] Browser Console [log]: "%c[17:59:40.187]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Game instance fetched {id: aa16d61d-5996-4f24-a60c-54e626c6f73a, accessCode: 3158, status: pending}"

[1A[2K[2025-06-13T15:59:40.219Z] Browser Console [log]: "%c[17:59:40.188]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Fetching game creator {id: fec2a112-9318-41c0-9c46-8bd877655068}"

[1A[2K[2025-06-13T15:59:40.219Z] Browser Console [log]: "%c[17:59:40.190]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Socket event: participants_list [Object]"

[1A[2K[2025-06-13T15:59:40.219Z] Browser Console [log]: "[Lobby] Socket event received: participants_list [Object]"

[1A[2K[2025-06-13T15:59:40.220Z] Browser Console [log]: "%c[17:59:40.202]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Socket event: participant_joined [Object]"

[1A[2K[2025-06-13T15:59:40.222Z] Browser Console [log]: "[Lobby] Socket event received: participant_joined [Object]"

[1A[2K[2025-06-13T15:59:40.224Z] Browser Console [log]: "%c[17:59:40.204]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Participant joined {id: RO4MU0i_BmB_ZHLHAABE, username: TestUser}"

[1A[2K[2025-06-13T15:59:40.224Z] Browser Console [log]: "%c[17:59:40.205]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Socket event: participants_list [Object]"

[1A[2K[2025-06-13T15:59:40.225Z] Browser Console [log]: "[Lobby] Socket event received: participants_list [Object]"

[1A[2K[2025-06-13T15:59:40.226Z] Browser Console [log]: "%c[17:59:40.208]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Socket event: participants_list [Object]"

[1A[2K[2025-06-13T15:59:40.227Z] Browser Console [log]: "[Lobby] Socket event received: participants_list [Object]"

[1A[2K[2025-06-13T15:59:40.246Z] Browser Console [log]: "%c[17:59:40.240]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Participant joined {id: kVYiOw0UkkMGc8afAABF, username: TestUser}"

[1A[2K[2025-06-13T15:59:40.247Z] Network Response: 200 http://localhost:3007/api/v1/users/fec2a112-9318-41c0-9c46-8bd877655068 

[1A[2K[2025-06-13T15:59:40.279Z] Browser Console [log]: "%c[17:59:40.266]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Identity check {userState: student, userProfile: Object}"

[1A[2K[2025-06-13T15:59:40.279Z] Browser Console [log]: "%c[17:59:40.268]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  User identity from AuthProvider {username: TestUser, avatar: 🐨, userId: fec2a112-9318-41c0-9c46-8bd877655068}"

[1A[2K[2025-06-13T15:59:40.320Z] Browser Console [log]: "%c[17:59:40.317]%c [INFO] %c[LobbyPage]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Starting tournament {code: 3158, socketConnected: true}"

[1A[2K[2025-06-13T15:59:40.328Z] Clicked "Démarrer le tournoi" button 

[1A[2K[2025-06-13T15:59:40.328Z] Waiting for 5-second countdown... 

[1A[2K[2025-06-13T15:59:40.344Z] Browser Console [log]: "%c[17:59:40.338]%c [INFO] %c[LobbyPage]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Game started (code: 3158), waiting for backend countdown events"

[1A[2K[2025-06-13T15:59:40.346Z] Browser Console [log]: "%c[17:59:40.339]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Socket event: game_started [Object]"

[1A[2K[2025-06-13T15:59:40.349Z] Browser Console [log]: "[Lobby] Socket event received: game_started [Object]"

[1A[2K[2025-06-13T15:59:40.349Z] Browser Console [log]: "%c[17:59:40.344]%c [INFO] %c[LobbyPage]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Game started (code: 3158), waiting for backend countdown events"

[1A[2K[2025-06-13T15:59:40.578Z] Browser Console [log]: "%c[17:59:40.576]%c [INFO] %c[LobbyPage]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Tournament starting countdown: 5 seconds"

[1A[2K[2025-06-13T15:59:40.581Z] Browser Console [log]: "%c[17:59:40.577]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Socket event: tournament_starting [Object]"

[1A[2K[2025-06-13T15:59:40.583Z] Browser Console [log]: "[Lobby] Socket event received: tournament_starting [Object]"

[1A[2K[2025-06-13T15:59:40.583Z] Browser Console [log]: "%c[17:59:40.578]%c [INFO] %c[LobbyPage]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Tournament starting countdown: 5 seconds"

[1A[2K[2025-06-13T15:59:40.600Z] Browser Console [log]: "%c[17:59:40.593]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Countdown tick: 5"

[1A[2K[2025-06-13T15:59:40.603Z] Browser Console [log]: "%c[17:59:40.594]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Socket event: countdown_tick [Object]"

[1A[2K[2025-06-13T15:59:40.603Z] Browser Console [log]: "[Lobby] Socket event received: countdown_tick [Object]"

[1A[2K[2025-06-13T15:59:40.604Z] Browser Console [log]: "%c[17:59:40.596]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Countdown tick: 5"

[1A[2K[2025-06-13T15:59:40.673Z] Countdown started - waiting for tournament to begin 

[1A[2K[2025-06-13T15:59:41.583Z] Browser Console [log]: "%c[17:59:41.579]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Countdown tick: 4"

[1A[2K[2025-06-13T15:59:41.585Z] Browser Console [log]: "%c[17:59:41.581]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Socket event: countdown_tick [Object]"

[1A[2K[2025-06-13T15:59:41.586Z] Browser Console [log]: "[Lobby] Socket event received: countdown_tick [Object]"

[1A[2K[2025-06-13T15:59:41.587Z] Browser Console [log]: "%c[17:59:41.582]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Countdown tick: 4"

[1A[2K[2025-06-13T15:59:42.214Z] Browser Console [log]: "%c[17:59:42.211]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Socket event: redirect_to_game [Object]"

[1A[2K[2025-06-13T15:59:42.215Z] Browser Console [log]: "[Lobby] Socket event received: redirect_to_game [Object]"

[1A[2K[2025-06-13T15:59:42.218Z] Browser Console [log]: "%c[17:59:42.212]%c [INFO] %c[LobbyPage]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Game started (code: 3158), waiting for backend countdown events"

[1A[2K[2025-06-13T15:59:42.218Z] Browser Console [log]: "%c[17:59:42.213]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Socket event: game_started [Object]"

[1A[2K[2025-06-13T15:59:42.219Z] Browser Console [log]: "[Lobby] Socket event received: game_started [Object]"

[1A[2K[2025-06-13T15:59:42.220Z] Browser Console [log]: "%c[17:59:42.214]%c [INFO] %c[LobbyPage]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Game started (code: 3158), waiting for backend countdown events"

[1A[2K[2025-06-13T15:59:42.587Z] Browser Console [log]: "%c[17:59:42.583]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Countdown tick: 3"

[1A[2K[2025-06-13T15:59:42.589Z] Browser Console [log]: "%c[17:59:42.584]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Socket event: countdown_tick [Object]"

[1A[2K[2025-06-13T15:59:42.590Z] Browser Console [log]: "[Lobby] Socket event received: countdown_tick [Object]"

[1A[2K[2025-06-13T15:59:42.590Z] Browser Console [log]: "%c[17:59:42.586]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Countdown tick: 3"

[1A[2K[2025-06-13T15:59:43.588Z] Browser Console [log]: "%c[17:59:43.585]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Countdown tick: 2"

[1A[2K[2025-06-13T15:59:43.589Z] Browser Console [log]: "%c[17:59:43.586]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Socket event: countdown_tick [Object]"

[1A[2K[2025-06-13T15:59:43.590Z] Browser Console [log]: "[Lobby] Socket event received: countdown_tick [Object]"

[1A[2K[2025-06-13T15:59:43.591Z] Browser Console [log]: "%c[17:59:43.587]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Countdown tick: 2"

[1A[2K[2025-06-13T15:59:44.592Z] Browser Console [log]: "%c[17:59:44.589]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Countdown tick: 1"

[1A[2K[2025-06-13T15:59:44.594Z] Browser Console [log]: "%c[17:59:44.590]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Socket event: countdown_tick [Object]"

[1A[2K[2025-06-13T15:59:44.594Z] Browser Console [log]: "[Lobby] Socket event received: countdown_tick [Object]"

[1A[2K[2025-06-13T15:59:44.594Z] Browser Console [log]: "%c[17:59:44.591]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Countdown tick: 1"

[1A[2K[2025-06-13T15:59:45.597Z] Browser Console [log]: "%c[17:59:45.593]%c [INFO] %c[LobbyPage]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Countdown complete, redirecting to /live/3158"

[1A[2K[2025-06-13T15:59:45.681Z] Browser Console [log]: "%c[17:59:45.674]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Socket event: countdown_complete []"

[1A[2K[2025-06-13T15:59:45.682Z] Browser Console [log]: "[Lobby] Socket event received: countdown_complete []"

[1A[2K[2025-06-13T15:59:45.683Z] Browser Console [log]: "%c[17:59:45.675]%c [INFO] %c[LobbyPage]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Countdown complete, redirecting to /live/3158"

[1A[2K[2025-06-13T15:59:45.718Z] Browser Console [log]: "%c[17:59:45.709]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Socket event: participant_left [Object]"

[1A[2K[2025-06-13T15:59:45.719Z] Browser Console [log]: "[Lobby] Socket event received: participant_left [Object]"

[1A[2K[2025-06-13T15:59:45.719Z] Browser Console [log]: "%c[17:59:45.710]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Participant left {id: RO4MU0i_BmB_ZHLHAABE, username: undefined}"

[1A[2K[2025-06-13T15:59:45.723Z] Browser Console [log]: "%c[17:59:45.712]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Socket event: participants_list [Object]"

[1A[2K[2025-06-13T15:59:45.724Z] Browser Console [log]: "[Lobby] Socket event received: participants_list [Object]"

[1A[2K[2025-06-13T15:59:45.729Z] Browser Console [log]: "%c[17:59:45.715]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Socket event: room_left [Object]"

[1A[2K[2025-06-13T15:59:45.730Z] Browser Console [log]: "[Lobby] Socket event received: room_left [Object]"

[1A[2K[2025-06-13T15:59:45.735Z] Browser Console [log]: "%c[17:59:45.719]%c [DEBUG] %c[LobbyPage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Socket event: room_left [Object]"

[1A[2K[2025-06-13T15:59:45.738Z] Browser Console [log]: "[Lobby] Socket event received: room_left [Object]"

[1A[2K[2025-06-13T15:59:46.778Z] Browser Console [info]: "%cDownload the React DevTools for a better development experience: https://react.dev/link/react-devtools font-weight:bold"

[1A[2K[2025-06-13T15:59:46.896Z] Redirected to live tournament page 

[1A[2K[2025-06-13T15:59:46.900Z] Failed to start tournament {
  "error": "page.waitForSelector: Unexpected token \"=\" while parsing css selector \"[data-testid=\"question-text\"], .question-text, .question, text=/Question/\". Did you mean to CSS.escape it?\nCall log:\n\u001b[2m  - waiting for [data-testid=\"question-text\"], .question-text, .question, text=/Question/ to be visible\u001b[22m\n"
}

[1A[2K[2025-06-13T15:59:46.901Z] Enhanced debugging test failed {
  "error": "Failed to start tournament: page.waitForSelector: Unexpected token \"=\" while parsing css selector \"[data-testid=\"question-text\"], .question-text, .question, text=/Question/\". Did you mean to CSS.escape it?\nCall log:\n\u001b[2m  - waiting for [data-testid=\"question-text\"], .question-text, .question, text=/Question/ to be visible\u001b[22m\n"
}

[1A[2K[2025-06-13T15:59:47.004Z] Browser Console [warning]: "No version information available for component [tex]/ams"

[1A[2K[2025-06-13T15:59:47.034Z] Browser Console [log]: "%c[17:59:47.028]%c [INFO] %c[Auth]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Refreshing authentication state {force: true, shouldShowLoading: true}"

[1A[2K[2025-06-13T15:59:47.036Z] Browser Console [log]: "%c[17:59:47.031]%c [DEBUG] %c[Auth]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Current localStorage at refresh: {theme: system, mathquest_avatar: 🐨, mathquest_cookie_id: guest_7hmf8l2e1_1749830378044, mathquest_username: TestUser}"

[1A[2K[2025-06-13T15:59:47.037Z] Browser Console [log]: "%c[17:59:47.033]%c [DEBUG] %c[Auth]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Current cookies at refresh: "

[1A[2K[2025-06-13T15:59:47.045Z] Browser Console [log]: "[AuthProvider] localStorage: {theme: system, mathquest_avatar: 🐨, mathquest_cookie_id: guest_7hmf8l2e1_1749830378044, mathquest_username: TestUser}"

[1A[2K[2025-06-13T15:59:47.046Z] Browser Console [log]: "[AuthProvider] document.cookie: "

[1A[2K[2025-06-13T15:59:47.052Z] Browser Console [log]: "%c[17:59:47.039]%c [DEBUG] %c[Auth]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Auth State Updated {userState: anonymous, isAuthenticated: false, isStudent: false, isTeacher: false, isLoading: true}"

[1A[2K[2025-06-13T15:59:47.058Z] Browser Console [log]: "%c[17:59:47.042]%c [DEBUG] %c[Auth]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Auth State Snapshot: {userState: anonymous, isAuthenticated: false, isStudent: false, isTeacher: false, userProfile: Object}"

[1A[2K[2025-06-13T15:59:47.059Z] Browser Console [log]: "%c[17:59:47.044]%c [DEBUG] %c[App]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Layout mounted - Debug level message"

[1A[2K[2025-06-13T15:59:47.060Z] Browser Console [log]: "%c[17:59:47.044]%c [INFO] %c[App]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Application initialized"

[1A[2K[2025-06-13T15:59:47.060Z] Browser Console [log]: "%c[17:59:47.046]%c [WARN] %c[App]%c color: gray; color: #ffcc00; font-weight: bold; color: #9370DB; font-weight: bold;  This is an example warning"

[1A[2K[2025-06-13T15:59:47.074Z] Browser Console [log]: "%c[17:59:47.048]%c [INFO] %c[App]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Current log level: DEBUG"

[1A[2K[2025-06-13T15:59:47.143Z] Network Response: 200 http://localhost:3008/api/auth/status 

[1A[2K[2025-06-13T15:59:47.227Z] Browser Console [log]: "%c[17:59:47.211]%c [WARN] %c[Auth]%c color: gray; color: #ffcc00; font-weight: bold; color: #9370DB; font-weight: bold;  Auth status response validation failed, using fallback {error: ZodError: [\n  {\n    \"code\": \"invalid_type\",\n    \"expected\": \"string\",\n    \"received\": \"null\",\n    \"…, receivedData: Object}"

[1A[2K[2025-06-13T15:59:47.228Z] Browser Console [log]: "%c[17:59:47.213]%c [DEBUG] %c[Auth]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Auth status response processed {data: Object, detectedState: student, teacherLoggedIn: false, studentLoggedIn: true, fetchedTeacherId: undefined}"

[1A[2K[2025-06-13T15:59:47.228Z] Browser Console [log]: "%c[17:59:47.213]%c [INFO] %c[Auth]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Refreshed Auth State {userState: student, studentLoggedIn: true, teacherLoggedIn: false, isAuthenticated: true, profile: Object}"

[1A[2K[2025-06-13T15:59:47.257Z] Browser Console [log]: "%c[17:59:47.250]%c [INFO] %c[LiveGamePage]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  User authentication verified for live game {userState: student, userProfile: Object}"

[1A[2K[2025-06-13T15:59:47.271Z] Browser Console [log]: "%c[17:59:47.252]%c [INFO] %c[useStudentGameSocket]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Initializing student socket connection for game: 3158 {userId: fec2a112-9318-41c0-9c46-8bd877655068, username: TestUser, isDiffered: false, url: http://localhost:3007}"

[1A[2K[2025-06-13T15:59:47.276Z] Browser Console [log]: "%c[17:59:47.271]%c [INFO] %c[LiveGamePage]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Joining game with enhanced socket hook"

[1A[2K[2025-06-13T15:59:47.282Z] Browser Console [log]: "%c[17:59:47.275]%c [WARN] %c[useStudentGameSocket]%c color: gray; color: #ffcc00; font-weight: bold; color: #9370DB; font-weight: bold;  Cannot join game: missing socket or parameters"

[1A[2K[2025-06-13T15:59:47.285Z] Browser Console [log]: "%c[17:59:47.279]%c [DEBUG] %c[LiveGamePage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Timer debug: {gameStateTimer: null, gameMode: tournament, isTimerShown: true}"

[1A[2K[2025-06-13T15:59:47.288Z] Browser Console [log]: "%c[17:59:47.280]%c [DEBUG] %c[Auth]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Auth State Updated {userState: student, isAuthenticated: true, isStudent: true, isTeacher: false, isLoading: false}"

[1A[2K[2025-06-13T15:59:47.288Z] Browser Console [log]: "%c[17:59:47.281]%c [DEBUG] %c[Auth]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Auth State Snapshot: {userState: student, isAuthenticated: true, isStudent: true, isTeacher: false, userProfile: Object}"

[1A[2K[2025-06-13T15:59:47.291Z] Browser Console [log]: "%c[17:59:47.282]%c [INFO] %c[useStudentGameSocket]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Disconnecting student socket for game: 3158"

[1A[2K[2025-06-13T15:59:47.292Z] Browser Console [warning]: "WebSocket connection to 'ws://localhost:3007/api/socket.io/?EIO=4&transport=websocket' failed: WebSocket is closed before the connection is established."

[1A[2K[2025-06-13T15:59:47.294Z] Browser Console [log]: "%c[17:59:47.287]%c [INFO] %c[LiveGamePage]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  User authentication verified for live game {userState: student, userProfile: Object}"

[1A[2K[2025-06-13T15:59:47.295Z] Browser Console [log]: "%c[17:59:47.291]%c [INFO] %c[useStudentGameSocket]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Initializing student socket connection for game: 3158 {userId: fec2a112-9318-41c0-9c46-8bd877655068, username: TestUser, isDiffered: false, url: http://localhost:3007}"

[1A[2K[2025-06-13T15:59:47.307Z] Browser Console [log]: "%c[17:59:47.298]%c [INFO] %c[LiveGamePage]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Joining game with enhanced socket hook"

[1A[2K[2025-06-13T15:59:47.307Z] Browser Console [log]: "%c[17:59:47.299]%c [WARN] %c[useStudentGameSocket]%c color: gray; color: #ffcc00; font-weight: bold; color: #9370DB; font-weight: bold;  Cannot join game: missing socket or parameters"

[1A[2K[2025-06-13T15:59:47.309Z] Browser Console [log]: "%c[17:59:47.300]%c [DEBUG] %c[LiveGamePage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Timer debug: {gameStateTimer: null, gameMode: tournament, isTimerShown: true}"

[1A[2K[2025-06-13T15:59:47.315Z] Network Response: 200 http://localhost:3007/api/v1/games/3158/state 

[1A[2K[2025-06-13T15:59:47.351Z] Network Response: 200 http://localhost:3007/api/v1/games/3158/state 

[1A[2K[2025-06-13T15:59:47.356Z] Browser Console [log]: "%c[17:59:47.351]%c [DEBUG] %c[LiveGamePage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Timer debug: {gameStateTimer: 0, gameMode: tournament, isTimerShown: true}"

[1A[2K[2025-06-13T15:59:47.379Z] Browser Console [log]: "%c[17:59:47.375]%c [INFO] %c[useStudentGameSocket]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Student socket connected: Gb-7O2RUuFPib3QeAABI"

[1A[2K[2025-06-13T15:59:47.397Z] Browser Console [log]: "%c[17:59:47.392]%c [INFO] %c[useStudentGameSocket]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Joining game 3158 {userId: fec2a112-9318-41c0-9c46-8bd877655068, username: TestUser, isDiffered: false}"

[1A[2K[2025-06-13T15:59:47.436Z] Browser Console [warning]: "Invalid payload for event game_joined: {gameId: aa16d61d-5996-4f24-a60c-54e626c6f73a, accessCode: 3158, status: active, currentQuestionIndex: 0, totalQuestions: 2}"

[1A[2K[2025-06-13T15:59:47.443Z] Browser Console [warning]: "Invalid payload for event game_joined: {gameId: aa16d61d-5996-4f24-a60c-54e626c6f73a, accessCode: 3158, status: active, currentQuestionIndex: 0, totalQuestions: 2}"

[1A[2K[2025-06-13T15:59:47.450Z] Browser Console [log]: "%c[17:59:47.447]%c [INFO] %c[useStudentGameSocket]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Received game_question {question: Object, questionIndex: 0, totalQuestions: 2, questionState: active, timer: 14}"

[1A[2K[2025-06-13T15:59:47.535Z] Browser Console [log]: "%c[17:59:47.467]%c [INFO] %c[useStudentGameSocket]%c color: gray; color: #00cc66; font-weight: bold; color: #9370DB; font-weight: bold;  Received game_question {question: Object, questionIndex: 0, totalQuestions: 2, questionState: active, timer: 14}"

[1A[2K[2025-06-13T15:59:47.535Z] Browser Console [log]: "%c[17:59:47.475]%c [DEBUG] %c[LiveGamePage]%c color: gray; color: #0099cc; font-weight: bold; color: #9370DB; font-weight: bold;  Timer debug: {gameStateTimer: 14, gameMode: tournament, isTimerShown: true}"

[1A[2K  2) [chromium] › tests/e2e/tournament-full-flow.spec.ts:336:9 › Tournament Full Flow E2E › should handle tournament with specific debugging 

    Error: Failed to start tournament: page.waitForSelector: Unexpected token "=" while parsing css selector "[data-testid="question-text"], .question-text, .question, text=/Question/". Did you mean to CSS.escape it?
    Call log:
    [2m  - waiting for [data-testid="question-text"], .question-text, .question, text=/Question/ to be visible[22m


      199 |     } catch (error: any) {
      200 |         log('Failed to start tournament', { error: error.message });
    > 201 |         throw new Error(`Failed to start tournament: ${error.message}`);
          |               ^
      202 |     }
      203 | }
      204 |
        at startTournament (/home/aflesch/mathquest/app/tests/e2e/tournament-full-flow.spec.ts:201:15)
        at /home/aflesch/mathquest/app/tests/e2e/tournament-full-flow.spec.ts:364:13

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results/tournament-full-flow-Tourn-692cf-ent-with-specific-debugging-chromium/test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results/tournament-full-flow-Tourn-692cf-ent-with-specific-debugging-chromium/video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results/tournament-full-flow-Tourn-692cf-ent-with-specific-debugging-chromium/error-context.md


🧹 Starting E2E test teardown...
✅ E2E test teardown complete
[1A[2K  2 failed
    [chromium] › tests/e2e/tournament-full-flow.spec.ts:301:9 › Tournament Full Flow E2E › should complete full tournament flow with feedback and leaderboard 
    [chromium] › tests/e2e/tournament-full-flow.spec.ts:336:9 › Tournament Full Flow E2E › should handle tournament with specific debugging 

To open last HTML report run:
[36m[39m
[36m  npx playwright show-report[39m
[36m[39m
