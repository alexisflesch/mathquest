---
applyTo: "**"
---


# App Modernization Progress

> **🤖 AI AGENT PROMPT INSTRUCTIONS:**
> This project enforces ZERO backward compatibility and ZERO legacy code patterns. When working on this codebase:

---

## 🔴 CRITICAL BEHAVIOR GUIDELINES

1. **📋 DOCUMENT EVERYTHING**
   - When working on an issue, maintain an up-to-date `plan.md` file at all times.
   - Every task must be part of a checklist with `[ ]` items; mark items as `[x]` when done.
   - Update the checklist before and after each change.

2. **🪵 LOG ALL ACTIONS**
   - Every non-trivial change must be recorded in the documentation if it affects the codebase somehow:
     - New socket events
     - New API endpoints
     - New Components
     - New Interfaces
     - etc...

3. **🗂️ PHASE-BASED PLANNING**
   - Work must be broken down into *phases*, each with a clear scope and exit criteria.
   - Keep the scope narrow: only work on one concern/module at a time.
   - If you cannot complete a phase cleanly, update the plan and stop.

4. **🎯 ALIGN WITH THE MAIN GOAL**
   - Always check whether the current task aligns with the overall modernization objective.
   - If not, pause and revise the plan.

5. **✅ TEST AND VALIDATE EVERYTHING**
   - After every change, provide clear steps for testing.
   - If possible, write a test case or describe how to run existing tests.
   - State expected vs. actual behavior.
   - **MANDATORY**: Run `npm run build` after any TypeScript changes to ensure compilation.
   - **MANDATORY**: Test the actual functionality in the application before declaring completion.

6. **📚 UPDATE VUEPRESS DOCS**
   - When making changes to the codebase, always update the corresponding VuePress documentation.
   - Keep technical documentation in sync with code changes.
   - Document new APIs, components, socket events, and architectural changes.
   - **MANDATORY**: Update type definitions, API schemas, and examples in docs when changing shared types.

7. **🧪 CREATE TESTS FOR BUG FIXES**
   - Always create tests to reproduce bugs before fixing them.
   - Write failing tests first, then implement the fix.
   - Ensure the test covers the specific bug scenario.

8. **🧪 CREATE TESTS FOR NEW CODE**
   - Always create comprehensive tests when introducing new code.
   - Include unit tests, integration tests, and edge case coverage.
   - Test both positive and negative scenarios.

9. **🔍 VALIDATE BEFORE COMPLETION**
   - **MANDATORY**: Run `npm run build` and ensure it completes successfully.
   - Check TypeScript compilation before declaring victory on any task.
   - Run all tests and ensure they pass.
   - Verify the build process completes successfully.
   - Test the actual functionality in the application.
   - **MANDATORY**: Search for and fix all references to removed/changed types across the entire codebase.

---

## ⚠️ ZERO TOLERANCE POLICY

10. **🚫 NEVER create migration layers or compatibility functions**
    - Rewrite code natively with modern patterns.

11. **🔄 ENFORCE consistent naming**
    - Match names across backend, frontend, database, and socket layers exactly.

12. **📦 USE shared types in `shared/`**
    - All API contracts and socket events must use canonical shared types.

13. **🧪 VALIDATE everything with Zod**
    - No untyped or unchecked data should ever flow through the system.

14. **📖 READ BEFORE YOU WRITE**
    - Read the docs first.
    - Update documentation with any new insights or clarifications after each phase.

15. **🔍 FIX ROOT CAUSES**
    - Don't patch over inconsistencies—remove them at the source.

16. **♻️ REMOVE redundant interfaces**
    - Prefer canonical types like `Question`, `FilteredQuestion`, etc.
    - Never redefine shared concepts locally.

17. **❌ REMOVE legacy compatibility fields**
    - Shared types must be clean, modern, and reflect the current system only.

18. **🎯 USE canonical shared types directly in components**
    - No mapping, re-wrapping, or interface duplication is allowed.

19. **🧩 USE existing components**
    - Always use existing components from the shared library.
    - If a component is missing, create it in the shared library.
   
20. **Use globals.css**
    - All global styles and colors should be defined in `globals.css` to ensure consistency across the application.
    - No hard-coded colors

21. **DON'T GUESS — VERIFY EVERYTHING**
    - Never guess variable names, function names, event names, types, or data structures.
    - Always check the codebase, shared types, and documentation before using any name or structure.
    - All event names and payloads must match the canonical shared types and Zod schemas in `shared/types/`.
    - If you are unsure, STOP and ask for clarification or search the codebase.
    - Any code or test that uses a non-canonical or guessed name/type is a modernization violation.---

## ⚙️ REQUIRED FILES & STRUCTURE

- `plan.md` → Global checklist with goals and sub-tasks
- `scripts/` → Store all automation scripts here (e.g., code mod tools, migrations)
- `notes/` → Optional: Temporary investigations or analysis for future actions

---

## 🧠 AI OPERATIONAL RULES

- ❗ Do NOT suggest or perform **manual edits** for multi-file changes unless I say otherwise.
  - Instead, create a reusable script or command (preferably Python).
- 🔍 Always **analyze existing patterns** before introducing new code.
- 🔄 When stuck, revise `plan.md` before proceeding.
- 🛑 If you're unsure whether a change helps the main goal, **STOP**, re-align and **ask**.

---

